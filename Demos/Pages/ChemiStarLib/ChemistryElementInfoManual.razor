@page "/chemistar/periodic/elementinfomanual"

<PageTitle>ChemiStar - Periodic Table - Element Info (manual) - Aptivi Project Demos</PageTitle>

@using System.Threading;
@using System.Net;
@using System.Text;
@using System.IO
@using System.Text.Json
@using ChemiStar
@using ChemiStar.Data
@using Demos.Data
@inject NavigationManager NavManager

<Hero Title="ChemiStar - Periodic Table - Element Info (manual)">
	You can demonstrate a feature from ChemiStar where we showcase this feature,
	and we provide the API documentation here for future reference. This demonstrates the
	"Get element info" feature.
</Hero>
<BrandedBorder>
	<div class="mb-3">
		<label class="form-label">Enter atomic number: <InputNumber @bind-Value="AtomicNumber"></InputNumber></label>
	</div>
	<p>Results from <code>GetSubstance()</code></p>
	@if (Result is not null)
	{
		<ul>
			<li>[@Result.AtomicNumber] @Result.Symbol - @Result.Name</li>
			<li>Summary: @Result.Summary</li>
			<li>Atomic mass: @Result.AtomicMass</li>
			<li>Category: @Result.Category</li>
			<li>Phase: @Result.Phase</li>
			<li>Period, Group: @Result.Period, @Result.Group</li>
			<li>Discovered by: @Result.Discoverer</li>
			<li>Named by: @Result.NamedBy</li>
			<li>Appearance: @Result.Appearance</li>
			<li>Boiling temperature: @Result.BoilingTemperature°K</li>
			<li>Melting temperature: @Result.MeltingTemperature°K</li>
        </ul>
    }
    else if (Errored)
    {
        <p>Error obtaining results: @ErrorReason</p>
    }
    <div class="d-grid gap-2 d-sm-flex">
		<button class="btn btn-primary btn-lg" type="button" @onclick="@ClickEvents[0]">Analyze</button>
		<button class="btn btn-primary btn-lg" type="button" @onclick="@ClickEvents[1]">API Reference</button>
	</div>
</BrandedBorder>

@code {
    public int AtomicNumber { get; set; } = 1;
    public bool Errored { get; set; } = false;
    public string ErrorReason { get; set; } = "";
    public SubstanceInfo Result { get; set; }
    public EventCallback[] ClickEvents => [
        EventCallback.Factory.Create(this, ProcessInput),
		EventCallback.Factory.Create(this, new Action(() => NavManager.NavigateTo("https://aptivi.github.io/ChemiStar/api/ChemiStar.PeriodicTableParser.html#ChemiStar_PeriodicTableParser_GetSubstance_System_Int32_"))),
	];

    public void ProcessInput()
    {
        try
        {
            Errored = false;
            Result = PeriodicTableParser.GetSubstance(AtomicNumber);
        }
        catch (Exception ex)
        {
            Errored = true;
            ErrorReason = ex.Message;
        }
	}
}
